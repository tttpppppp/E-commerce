@{
    var categories = new WebSale.Models.WebBanHangASPEntities3()
.Categories
.Where(item => item.status == 1)
.Take(8)
.ToList();
}
<!doctype html>
<html lang="en">
<head>
    <title>@ViewBag.title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="~/assets/style.css" rel="stylesheet" />
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
          integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
          crossorigin="anonymous" />
    <link rel="shortcut icon"
          href="https://file.hstatic.net/200000823693/file/favicon_57c734b04e1e4e918b68e996bf90399c.png"
          type="image/x-icon">
    <link rel="stylesheet"
          href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick-theme.min.css"
          integrity="sha512-17EgCFERpgZKcm0j0fEq1YCJuyAWdz9KUtv1EjVuaOz8pDnh/0nZxmU6BBXwaaxqoi9PQXnRWqlcDB027hgv9A=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css"
          integrity="sha512-yHknP1/AwR+yx26cB1y0cjvQUMvEa2PFzt1c9LlS4pRQ5NOTZFWbhBig+X9G9eYW/8m0/4OXNx8pxJ6z57x0dw=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
          integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

</head>

<body>
    <header>
        <div class="container">
            <div class="menu-top">
                <div class="row align-items-center">
                    <div class="col-lg-2 p-1 position-relative">
                        <a class="text-decoration-none text-black"
                           href="/">
                            <img loading="lazy"
                                 src="https://file.hstatic.net/200000823693/file/logo_f06b40e76f4e462b9be384df2a27f075.png"
                                 alt
                                 class="img-fluid pointer-event">
                        </a>
                    </div>
                    <div class="p-0 top-right col-lg-10 d-flex align-items-center gap-2">
                        <a class="system">
                            <p>Hệ thống cửa hàng</p>
                            <p>(45 chi nhánh)</p>
                        </a>
                        <form class="form-search" method="get" action="/search/">
                            <input type="text"
                                   placeholder="Bạn tìm gì hôm nay?" style="font-size : 14px" name="keyword" required>
                            <button type="submit" class="btn-search">
                                <i class="fa-solid fa-magnifying-glass" style="font-size : 16px"></i>
                            </button>
                        </form>
                        <div class="blog-block">
                            <a class="blog-block-abs" href="/congnghe">24 Công nghệ</a>
                            <a href>Sự kiện</a>
                        </div>
                        <div class="phone">
                            <div class="text-white contact d-flex align-items-center gap-2 me-2">
                                <i class="fa-solid fa-phone-volume"></i>
                                <div class="text-white">
                                    <span>Hotline</span>
                                    <p class="m-0">900.636.099</p>
                                </div>
                            </div>
                        </div>
                        <div class="user">
                            <div class="text-white contact d-flex align-items-center gap-2">
                                <i class="fa-regular fa-user fs-4"></i>
                                <div class="user-text text-white">
                                    @if (Session["user"] != null)
                                    {
                                        <span>
                                            @{
                                                var user = Session["user"] as dynamic;
                                                if (user != null)
                                                {
                                                    <a>@user.FirstName</a>
                                                }
                                                else
                                                {
                                                    <a>Khách</a>
                                                }
                                            }
                                        </span>
                                        <p class="m-0 logout-login"><a href="">Đăng xuất</a></p>
                                    }
                                    else
                                    {
                                        <span>
                                            <a href="/dangnhap">
                                                Đăng
                                                nhập
                                            </a>
                                        </span>
                                        <p class="m-0"><a href="/dangki">Đăng kí</a></p>
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="cart-menu position-relative">
                            <div class="d-flex align-items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-cart2" viewBox="0 0 16 16">
                                    <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l1.25 5h8.22l1.25-5zM5 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0" />
                                </svg>
                                <div class="cart-text">
                                    <a href="/cart" class="text-decoration-none text-white">
                                        <span>Giỏ</span>
                                        <p class="m-0">hàng</p>
                                    </a>
                                </div>
                                <div class="count position-absolute d-flex align-items-center justify-content-center fw-bold"
                                     style="width: 21px; height: 21px; background: red; background: #d70018; border-radius: 50%; font-size: 10px; top: 0; left: 11px; z-index: 10;">
                                    <div id="countLast" class="countLast">
                                        @{
                                            int totalItems = 0;
                                            if (Session["Cart"] != null)
                                            {
                                                var cart = (List<WebSale.Models.CartItem>)Session["Cart"];
                                                totalItems = cart.Count();
                                            }
                                        }
                                        @totalItems
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <ul class="menu">
                @if (categories != null && categories.Count > 0)
                {
                    foreach (var item in categories)
                    {
                        <li>
                            <a href="/category/@item.slug">@item.nameCategory</a>
                        </li>
                    }
                }

            </ul>
        </div>
    </header>
    <div class="menu-mobile">
        <div class="container">
            <div class="d-flex align-items-center gap-4">
                <a href="index.html" class="d-block">
                    <img loading="lazy" src="./img/logo_mobi.webp" alt
                         class="img-fluid"
                         style="width: 100px;">
                </a>
                <div class="form-search">
                    <input type="text" class="w-100"
                           placeholder="Bạn muốn tìm gì?...">
                    <button type="submit" class="btn-search">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </button>
                </div>
                <a href="login.html"
                   class="text-white text-decoration-none mt-lg-0 mt-2">
                    <i class="fa-regular fa-user fs-4"></i>
                </a>
            </div>
        </div>
    </div>
    <div class="menu-mobile-mb">
        <div class="d-flex align-items-center justify-content-center gap-2 pt-2">
            <div style="width: 20%;" class="text-center active">
                <a href="index.html" class="active-color">
                    <i class="fa-solid fa-house-user"></i>
                    <p class>Trang chủ</p>
                </a>
            </div>
            <div style="width: 20%;" class="text-center">
                <a href>
                    <i class="fa-regular fa-heart"></i></i>
                    <p>Yêu thích</p>
                </a>
            </div>
            <div style="width: 20%;" class="text-center">
                <a href>
                    <i class="fa-solid fa-bars"></i>
                    <p>Danh mục</p>
                </a>
            </div>
            <div style="width: 20%;" class="text-center">
                <a href>
                    <i class="fa-regular fa-message"></i>
                    <p>Tư vấn</p>
                </a>
            </div>
            <div style="width: 20%;" class="text-center">
                <a href="cart.html">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <p>Giỏ hàng</p>
                </a>
            </div>
        </div>
    </div>
    @RenderBody()
    <section class="bg-white p-4">
        <div class="container">
            <div class="row mt-3 mb-5">
                <div class="col-sm-12 col-lg-6 col-md-7 p-0">
                    <img loading="lazy"
                         src="https://file.hstatic.net/200000823693/file/logo_foo_320e3cee3eba49c4ae45be243a914d15.png"
                         width="200px" class="mb-2">
                    <address class="vcard mb-2">
                        <p class="adr m-0">
                            <b>Hà Nội: </b>Tầng 3,
                            tòa nhà The Artemis, số 03 Lê Trọng Tấn,
                            Khương
                            Mai, Thanh Xuân, Hà Nội
                        </p>
                        <p class="m-0">
                            <b>Hotline: </b><a class="text-decoration-none text-black"
                                               href="tel:1900636099"
                                               title="1900.636.099">1900.636.099</a>
                        </p>
                        <p class="adr m-0">
                            <b>HCM: </b>Lầu 6, 182 Lê
                            Đại Hành, P.15, Quận 11, Tp.HCM
                        </p>
                        <p class="m-0">
                            <b>Hotline: </b><a class="text-decoration-none text-black"
                                               href="tel:1900636099"
                                               title="1900.636.099">1900.636.099</a>
                        </p>
                        <p class="m-0">
                            <b>Email: </b><a class="text-decoration-none text-black"
                                             href="mailto:support@haravan.com"
                                             title="support@haravan.com">support@haravan.com</a>
                        </p>
                    </address>
                </div>
                <div class="col-6 col-lg-3 col-md-6 p-0">
                    <h3 class="footer-title mb-2 position-relative fw-bold">
                        Chính
                        sách
                    </h3>
                    <ul class="links list-unstyled m-0 p-0">
                        <li>
                            <a class="text-decoration-none text-black"
                               href title="Tìm kiếm">
                                Tìm
                                kiếm
                            </a>
                        </li>

                        <li>
                            <a class="text-decoration-none text-black"
                               href title="Giới thiệu">
                                Giới
                                thiệu
                            </a>
                        </li>

                        <li>
                            <a class="text-decoration-none text-black"
                               href
                               title="Chính sách đổi trả">
                                Chính
                                sách
                                đổi trả
                            </a>
                        </li>

                        <li>
                            <a class="text-decoration-none text-black"
                               href
                               title="Chính sách bảo mật">
                                Chính
                                sách
                                bảo mật
                            </a>
                        </li>

                        <li>
                            <a class="text-decoration-none text-black"
                               href title="Điều khoản dịch vụ">
                                Điều
                                khoản
                                dịch vụ
                            </a>
                        </li>

                        <li>
                            <a class="text-decoration-none text-black"
                               href title="Liên hệ">
                                Liên
                                hệ
                            </a>
                        </li>

                    </ul>
                </div>
                <div class="col-12 col-lg-3 col-md-6 p-0 footter-sp">
                    <h3 class="footer-title mb-2 position-relative fw-bold">
                        Hỗ
                        trợ
                    </h3>
                    <div class="d-flex align-items-center gap-1">
                        <img loading="lazy"
                             src="https://file.hstatic.net/200000785527/file/facebook_ce742afdcdea4026a633915bdfdce6f5.png"
                             alt class>
                        <img loading="lazy"
                             src="https://file.hstatic.net/200000785527/file/twitter_b15cb1006ec04c63855aef2dec8fac47.png"
                             alt>
                        <img loading="lazy"
                             src="https://file.hstatic.net/200000785527/file/instagram_45effdfd0d0e47d986a7c8b1a8e2ab01.png"
                             alt>
                        <img loading="lazy"
                             src="https://file.hstatic.net/200000785527/file/youtube_749d73527fb94f2c8d005d2ffdb1ca10.png"
                             alt>
                        <img loading="lazy"
                             src="https://file.hstatic.net/200000785527/file/shopee_efcb449798c24dd4a4a312f1ad9e3e8d.png"
                             width="32px" alt>
                        <img loading="lazy"
                             src="https://file.hstatic.net/200000785527/file/lazada_0080ef48005044af8ba3f720097866f7.jpg"
                             width="32px" alt class="rounded-5">
                    </div>
                    <p class="mt-2">Phương thức thanh toán</p>
                    <div class="d-flex align-items-center gap-1">
                        <img loading="lazy"
                             src="https://file.hstatic.net/200000823693/file/payment-1_2c94a9495fa04f4ab8b11be786441266.png"
                             alt width="45px">
                        <img loading="lazy"
                             src="https://file.hstatic.net/200000823693/file/payment-2_bdbf0ab7d5d24e138faa24e497b38a9b.png"
                             alt width="45px">
                        <img loading="lazy"
                             src="https://file.hstatic.net/200000823693/file/payment-3_3a8dba86bfd74a85be3db17837d4c9c6.png"
                             alt width="45px">
                        <img loading="lazy"
                             src="https://file.hstatic.net/200000823693/file/payment-4_f03f301a303c448db851de3e9e91ade2.png"
                             alt width="45px">
                    </div>
                </div>
            </div>
            <div class="row border-top border-bottom py-4">
                <ul class="links_sm list-unstyled row mb-0 p-0">
                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/dien-thoai-iphone"
                           title="IPhone">IPhone</a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/tablet"
                           title="Máy tính bảng">
                            Máy tính
                            bảng
                        </a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/macbook"
                           title="Macbook">Macbook</a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/phu-kien-laptop"
                           title="Phụ kiện laptop">
                            Phụ kiện
                            laptop
                        </a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/smartwatch"
                           title="Smartwatch">Smartwatch</a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/cap-sac"
                           title="Cáp sạc">Cáp sạc</a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/dan-man-hinh"
                           title="Dán màn hình">
                            Dán màn
                            hình
                        </a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/op-lung-bao-da"
                           title="Ốp lưng - bao da">
                            Ốp lưng - bao
                            da
                        </a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/pin-du-phong"
                           title="Pin dự phòng">
                            Pin dự
                            phòng
                        </a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/tai-nghe"
                           title="Tai nghe">Tai nghe</a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/thiet-bi-mang"
                           title="Thiết bị mạng">
                            Thiết bị
                            mạng
                        </a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/tivi"
                           title="Tivi">Tivi</a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/may-hut-bui"
                           title="Robot hút bụi">
                            Robot hút
                            bụi
                        </a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/quat-thong-minh"
                           title="Quạt thông minh">
                            Quạt thông
                            minh
                        </a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/chuot-ban-phim"
                           title="Chuột, bàn phím">
                            Chuột, bàn
                            phím
                        </a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/thiet-bi-luu-tru"
                           title="USB">USB</a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/balo-laptop"
                           title="Balo chống sốc">
                            Balo chống
                            sốc
                        </a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/camera-an-ninh"
                           title="Camera an ninh">
                            Camera an
                            ninh
                        </a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/camera-du-lich"
                           title="Camera du lịch">
                            Camera du
                            lịch
                        </a>
                    </li>

                    <li class="col-6 col-sm-4 col-md-3 col-lg-2 m-0">
                        <a class="text-decoration-none text-black"
                           href="/collections/o-cung"
                           title="Ổ cứng">Ổ cứng</a>
                    </li>

                </ul>
            </div>
            <span class="d-block mt-2 text-center pb-5 pb-lg-0">
                Bản
                quyền thuộc về Tran Tien Phuc. Powered by
                TPP
            </span>
        </div>
    </section>
    <div class="">
        <a href="#" class="text-decoration-none scrol-top text-light">
            <i class="fa-solid fa-chevron-up"></i>
        </a>
    </div>
    <div class="fix-phone text-center">
        <div class="d-flex flex-column">
            <i class="fa-brands fa-facebook-f"></i>
            <i class="fa-brands fa-facebook-messenger"></i>
            <i class="fa-solid fa-phone-volume"></i>
        </div>
    </div>
    <script src="~/assets/js.js"></script>
    <!-- jQuery (nếu chưa có) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Toastr JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
            integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        var swiper = new Swiper(".mySwiper", {
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
        });
    </script>
    <script>
        $(document).ready(function () {
            $('.cart').click(function () {
                var productId = $(this).data('product-id');
                $.ajax({
                    url: '/Admin/Product/addToCart',
                    type: 'POST',
                    data: { id: productId },
                    success: function (response) {
                        if (response.success) {
                            toastr.success('Thêm sản phẩm thành công', 'Thành công', {
                                timeOut: 1000,
                            });
                            $(".countLast").text(response.count);
                        } else {

                        }
                    },
                    error: function () {
                        toastr.error('Có lỗi xảy ra khi thêm sản phẩm vào giỏ hàng.', 'Lỗi', {
                            timeOut: 3000,
                            closeButton: true,
                            progressBar: true,
                            escapeHtml: false
                        });
                    }
                });
            });
            $(document).on("click", ".addCount", function (e) {

                var productid = $(this).data('product-id');
                var quantity = $(this).data('quantity');
                var quantityInput = $(this).siblings('.quantity-input');
                var currentQuantity = parseInt(quantityInput.val()) || 0;
                var priceElement = $(".price-item-cart[data-product-id='" + productid + "']");
                var totalPrice = $(".totalPrice");
                var action = "Add";
                var newQuantity = currentQuantity + 1;
                $.ajax({
                    url: "/Admin/Product/updateCart",
                    type: "POST",
                    dataType: "json",
                    data: {
                        productid: productid,
                        quantity: newQuantity,
                        action: action
                    },
                    success: function (response) {
                        if (response.success) {
                            quantityInput.val(response.newQuantity);
                            priceElement.text(response.newPrice.toLocaleString());
                            totalPrice.text(response.totalPrice.toLocaleString());
                        } else {
                            console.error("Cập nhật không thành công:", response.message);
                        }
                    },
                    error: function () {

                    }
                });
            });
            $(document).on("click", ".minusCount", function (e) {
                var productid = $(this).data('product-id');
                var quantity = $(this).data('quantity');
                var quantityInput = $(this).siblings('.quantity-input');
                var currentQuantity = parseInt(quantityInput.val()) || 0;
                var priceElement = $(".price-item-cart[data-product-id='" + productid + "']");
                var totalPrice = $(".totalPrice");
                var action = "Delete";
                if (currentQuantity >= 2) {
                    var newQuantity = currentQuantity - 1;
                }
                $.ajax({
                    url: "/Admin/Product/updateCart",
                    type: "POST",
                    dataType: "json",
                    data: {
                        productid: productid,
                        quantity: newQuantity,
                        action: action
                    },
                    success: function (response) {
                        if (response.success) {
                            quantityInput.val(response.newQuantity);
                            priceElement.text(response.newPrice.toLocaleString());
                            totalPrice.text(response.totalPrice.toLocaleString())
                        } else {
                            console.error("Cập nhật không thành công:", response.message);
                        }
                    },
                    error: function () {

                    }
                });
            });
            $(document).on("click", ".delete-cart", function (e) {
                var productid = $(this).data('product-id');
                var productContainer = $(this).closest(".p-4.border.rounded-4.position-relative.mb-3");
                var totalPrice = $(".totalPrice");
                $.ajax({
                    url: "/Admin/Product/deleteCart",
                    type: "POST",
                    dataType: "json",
                    data: {
                        productid: productid,
                    },
                    success: function (response) {
                        if (response.success) {
                            productContainer.remove();
                            totalPrice.text(response.totalPrice.toLocaleString());
                            $(".countLast").text(response.count);
                            if (response.count <= 0) {
                                $("#listcart").html(`
                                    <div class="container mt-5">
                                        <div class="row">
                                            <div class="col-12 col-md-12 text-center">
                                                <img src="/img/JikA6AqzCC55LcNmcHjZ.png" alt="" width="400px">
                                                <div class="alert alert-warning mt-3" role="alert">
                                                    Không có sản phẩm nào. Quay lại <a href="/" class="alert-link">cửa hàng</a> để tiếp tục mua sắm.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `);
                            }
                        }
                    },   
                    error: function () {

                    }
                });
            });
            $(document).on("click", ".delete-all-cart", function (e) {
                var totalPrice = $(".totalPrice");
                $.ajax({
                    url: "/Admin/Product/deleteAllCart",
                    type: "POST",
                    dataType: "json",
                    data: {

                    },
                    success: function (response) {
                        if (response.success) {
                            $(".p-4.border.rounded-4.position-relative.mb-3").remove();
                            totalPrice.text(response.totalPrice.toLocaleString());
                            $(".countLast").text(response.count);
                            if (response.count <= 0) {
                                $("#listcart").html(`
                                    <div class="container mt-5">
                                        <div class="row">
                                            <div class="col-12 col-md-12 text-center">
                                                <img src="/img/JikA6AqzCC55LcNmcHjZ.png" alt="" width="400px">
                                                <div class="alert alert-warning mt-3" role="alert">
                                                    Không có sản phẩm nào. Quay lại <a href="/" class="alert-link">cửa hàng</a> để tiếp tục mua sắm.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `);
                            }
                        }
                    },
                    error: function () {

                    }
                });
            });
            $(document).on("click", ".dangnhap", function (e) {
                e.preventDefault(); 
                var email = $(".email-login").val();
                var password = $(".password-login").val();

                $.ajax({
                    url: "/DangNhap/Index",
                    type: "POST",
                    dataType: "json",
                    data: {
                        email: email,
                        password: password
                    },
                    success: function (response) {
                        if (response.isSuccess) {
                            Swal.fire({
                                title: 'Đăng nhập thành công!',
                                text: 'Chào mừng bạn đến với hệ thống của chúng tôi.',
                                icon: 'success',
                                confirmButtonText: 'OK',
                                timer: 3000,
                                timerProgressBar: true,
                            }).then(() => {
                                window.location.href = '/';
                            });
                        } else {
                            $(".error-login").text(response.error);
                        }
                    },
                    error: function () {
                        $(".error-login").text("Có lỗi xảy ra. Vui lòng thử lại.");
                    }
                });
            });
            $(document).on("click", ".logout-login", function (e) {
                e.preventDefault();
                $.ajax({
                    url: "/DangNhap/logout",
                    type: "POST",
                    dataType: "json",
                    data: {

                    },
                    success: function (response) {
                        if (response.isSuccess) {
                            Swal.fire({
                                title: 'Đăng xuất!',
                                text: 'Bạn có chắc muốn đăng xuất?',
                                icon: 'warning',
                                showCancelButton: true,
                                confirmButtonText: 'OK',
                                cancelButtonText: 'Hủy bỏ',
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                            }).then((result) => {
                                if (result.isConfirmed) {
                                    window.location.href = '/';
                                }
                            });
                        } else {
                            $(".error-login").text(response.error);
                        }
                    },
                    error: function () {
                        $(".error-login").text("Có lỗi xảy ra. Vui lòng thử lại.");
                    }
                });
            });
            $(document).on("click", ".register-btn", function (e) {
                e.preventDefault();

                var email = $(".email-register").val();
                var password = $(".password-register").val();
                var repassword = $(".repassword-register").val();
                var name = $(".name-register").val();
                var firstname = $(".firstname-register").val();
                var mobile = $(".mobile-register").val();

                $.ajax({
                    url: "/DangKi/Index",
                    type: "POST",
                    dataType: "json",
                    data: {
                        email: email,
                        password: password,
                        repassword: repassword,
                        name: name,
                        firstname: firstname,
                        mobile: mobile
                    },
                    success: function (response) {
                        if (response.isSuccess) {
                            Swal.fire({
                                title: 'Đăng kí!',
                                text: 'Đăng kí thành công đăng nhập ngay!.',
                                icon: 'success',
                                confirmButtonText: 'OK',
                                timer: 3000,
                                timerProgressBar: true,
                            }).then(() => {
                                window.location.href = '/dangnhap';
                            });
                        } else {
                            $(".error-register").text(response.error);
                        }
                    },
                    error: function () {
                        $(".error-login").text("Có lỗi xảy ra. Vui lòng thử lại.");
                    }
                });
            });
            function getSlugFromUrl() {
                var path = window.location.pathname;
                var segments = path.split("/"); 
                return segments[segments.length - 1];
            }
            $(document).on("click", ".btn-filter", function (e) {
                e.preventDefault();
                $(".nav-item").removeClass("active border-danger");
                $(this).parent().addClass("active border-danger");
                var type = $(this).data("type");
                var slug = getSlugFromUrl();
                $.ajax({
                    url: "/FilterCategory/Index",
                    type: "GET",
                    dataType: "json",
                    data: {
                        type: type,
                        slug: slug

                    },
                    success: function (response) {
                        var productList = $("#productList");
                        productList.empty();
                        $.each(response, function (index, item) {
                            var formattedPrice = new Intl.NumberFormat('vi-VN', {
                                style: 'currency',
                                currency: 'VND',
                            }).format(item.price);
                            var formattedSalePrice = new Intl.NumberFormat('vi-VN', {
                                style: 'currency',
                                currency: 'VND',
                            }).format(item.sale_price);

                            var productHtml = `
                                    <div class="col-lg-3 col-md-4 col-sm-6 col-6">
                                        <div class="flash-item">
                                            <a href="/products/${item.slug}">
                                                <img loading="lazy" src="${item.image}" alt="" class="img-fluid">
                                            </a>
                                            <div class="flash-text mt-3">
                                                    <p class="m-0 text-truncate" style="max-width: 200px;" title="${item.nameProduct}">
                                                        ${item.nameProduct}
                                                    </p>
                                                    <div class="price">
                                                        <span class="text-danger">${formattedPrice}</span>
                                                        <span class="price-sale">${formattedSalePrice}</span>
                                                    </div>
                                                     <div class="d-flex align-items-center gap-2">
                                                         <i class="fa-regular fa-heart"></i>
                                                         <label for>Yêu thích</label>
                                                     </div>
                                               </div>
                                               <span class="label-sale position-absolute">
                                                    Giảm ${item.percen_sale}%
                                                </span>
                                               <div class="cart" data-product-id="${item.productId}">
                                                   <i class="fa-solid fa-plus"></i>
                                               </div>
                                            </div>
                                        </div>
                                    </div>`;
                            productList.append(productHtml);
                        });
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.error("Lỗi AJAX:", textStatus, errorThrown);
                        alert("Có lỗi xảy ra khi tải sản phẩm. Vui lòng thử lại.");
                    },
                });
            });
            $(document).on("click", ".btn-fil-price", function () {
                var minPrice = $(this).data("min");
                var maxPrice = $(this).data("max");
                var slug = getSlugFromUrl();  
                $.ajax({
                    url: "/FilterCategory/Index",
                    type: "GET",
                    data: {
                        minPrice: minPrice,
                        maxPrice: maxPrice,
                        slug: slug
                    },
                    success: function (response) {
                        var productList = $("#productList");
                        productList.empty(); 
                        if (response.length <= 0) {
                            productList.append('<div class="alert alert-warning text-center">Không có sản phẩm nào phụ hợp!</div>');
                        }
                        $.each(response, function (index, item) {
                            var formattedPrice = new Intl.NumberFormat('vi-VN', {
                                style: 'currency',
                                currency: 'VND',
                            }).format(item.price);

                            var formattedSalePrice = new Intl.NumberFormat('vi-VN', {
                                style: 'currency',
                                currency: 'VND',
                            }).format(item.sale_price);
                            var productHtml = `
                               <div class="col-lg-3 col-md-4 col-sm-6 col-6">
                                   <div class="flash-item">
                                       <a href="/products/${item.slug}">
                                           <img loading="lazy" src="${item.image}" alt="" class="img-fluid">
                                       </a>
                                       <div class="flash-text mt-3">
                                               <p class="m-0 text-truncate" style="max-width: 200px;" title="${item.nameProduct}">
                                                   ${item.nameProduct}
                                               </p>
                                               <div class="price">
                                                   <span class="text-danger">${formattedPrice}</span>
                                                   <span class="price-sale">${formattedSalePrice}</span>
                                               </div>
                                                <div class="d-flex align-items-center gap-2">
                                                    <i class="fa-regular fa-heart"></i>
                                                    <label for>Yêu thích</label>
                                                </div>
                                          </div>
                                          <span class="label-sale position-absolute">
                                               Giảm ${item.percen_sale}%
                                           </span>
                                          <div class="cart" data-product-id="${item.productId}">
                                              <i class="fa-solid fa-plus"></i>
                                          </div>
                                       </div>
                                   </div>
                               </div>`;

                            // Thêm sản phẩm vào danh sách
                            productList.append(productHtml);
                        });
                    },
                    error: function () {
                        console.error("Error");
                    }
                });
            });
            $(document).on("click", ".btn-fil-brand", function () {
                var brand = $(this).data("brand");
                var slug = getSlugFromUrl();
                $.ajax({
                    url: "/FilterCategory/Index",
                    type: "GET",
                    data: {
                        brand: brand,
                        slug: slug
                    },
                    success: function (response) {
                        var productList = $("#productList");
                        productList.empty();
                        if (response.length <= 0) {
                            productList.append('<div class="alert alert-warning text-center">Không có sản phẩm nào phụ hợp!</div>');
                        }
                        $.each(response, function (index, item) {
                            var formattedPrice = new Intl.NumberFormat('vi-VN', {
                                style: 'currency',
                                currency: 'VND',
                            }).format(item.price);

                            var formattedSalePrice = new Intl.NumberFormat('vi-VN', {
                                style: 'currency',
                                currency: 'VND',
                            }).format(item.sale_price);
                            var productHtml = `
                   <div class="col-lg-3 col-md-4 col-sm-6 col-6">
                       <div class="flash-item">
                           <a href="/products/${item.slug}">
                               <img loading="lazy" src="${item.image}" alt="" class="img-fluid">
                           </a>
                           <div class="flash-text mt-3">
                                   <p class="m-0 text-truncate" style="max-width: 200px;" title="${item.nameProduct}">
                                       ${item.nameProduct}
                                   </p>
                                   <div class="price">
                                       <span class="text-danger">${formattedPrice}</span>
                                       <span class="price-sale">${formattedSalePrice}</span>
                                   </div>
                                    <div class="d-flex align-items-center gap-2">
                                        <i class="fa-regular fa-heart"></i>
                                        <label for>Yêu thích</label>
                                    </div>
                              </div>
                              <span class="label-sale position-absolute">
                                   Giảm ${item.percen_sale}%
                               </span>
                              <div class="cart" data-product-id="${item.productId}">
                                  <i class="fa-solid fa-plus"></i>
                              </div>
                           </div>
                       </div>
                   </div>`;

                            // Thêm sản phẩm vào danh sách
                            productList.append(productHtml);
                        });
                    },
                    error: function () {
                        console.error("Error");
                    }
                });
            });
            $(document).on("click", ".btn-fil-type", function () {
                var brand = $(this).data("type");
                var slug = getSlugFromUrl();
                $.ajax({
                    url: "/FilterCategory/Index",
                    type: "GET",
                    data: {
                        typeId: brand,
                        slug: slug
                    },
                    success: function (response) {
                        var productList = $("#productList");
                        productList.empty();
                        if (response.length <= 0) {
                            productList.append('<div class="alert alert-warning text-center">Không có sản phẩm nào phụ hợp!</div>');
                        }
                        $.each(response, function (index, item) {
                            var formattedPrice = new Intl.NumberFormat('vi-VN', {
                                style: 'currency',
                                currency: 'VND',
                            }).format(item.price);

                            var formattedSalePrice = new Intl.NumberFormat('vi-VN', {
                                style: 'currency',
                                currency: 'VND',
                            }).format(item.sale_price);
                            var productHtml = `
                                 <div class="col-lg-3 col-md-4 col-sm-6 col-6">
                                     <div class="flash-item">
                                         <a href="/products/${item.slug}">
                                             <img loading="lazy" src="${item.image}" alt="" class="img-fluid">
                                         </a>
                                         <div class="flash-text mt-3">
                                                 <p class="m-0 text-truncate" style="max-width: 200px;" title="${item.nameProduct}">
                                                     ${item.nameProduct}
                                                 </p>
                                                 <div class="price">
                                                     <span class="text-danger">${formattedPrice}</span>
                                                     <span class="price-sale">${formattedSalePrice}</span>
                                                 </div>
                                                  <div class="d-flex align-items-center gap-2">
                                                      <i class="fa-regular fa-heart"></i>
                                                      <label for>Yêu thích</label>
                                                  </div>
                                            </div>
                                            <span class="label-sale position-absolute">
                                                 Giảm ${item.percen_sale}%
                                             </span>
                                            <div class="cart" data-product-id="${item.productId}">
                                                <i class="fa-solid fa-plus"></i>
                                            </div>
                                         </div>
                                     </div>
                                 </div>`;

                            // Thêm sản phẩm vào danh sách
                            productList.append(productHtml);
                        });
                    },
                    error: function () {
                        console.error("Error");
                    }
                });
            });
            $(document).on("click", ".btn-gift-add", function (e) {
                var isDisabled = $(this).find('button').is(':disabled');
                if (isDisabled) {
                    return; 
                }
                var productId = $(this).data('product-id');
                $.ajax({
                    url: "/QuaTang/Index",
                    type: "POST",
                    dataType: "json",
                    data: {
                        productId: productId
                    },
                    success: function (response) {
                        if (response.success) {
                            toastr.success('Nhận quà tăng thành công', 'Thành công', {
                                timeOut: 1000,
                            });
                            $(".countLast").text(response.count);
                            $(".gift").remove();
                            const productHtml = `
                    <div class="p-4 border rounded-4 position-relative mb-3">
                        <div class="align-items-lg-center d-flex gap-3">
                            <div>
                                <img src="${response.item.image}" alt="" class="img-fluid" width="70px">
                            </div>
                            <div class="pl-2 pl-lg-3 w-100">
                                <p class="text-color fw-bold m-0">${response.item.nameProduct}</p>
                                <div class="d-flex justify-content-between w-100 mt-2">
                                    <div class="d-flex">
                                        <span>Miễn Phí</span>
                                    </div>
                                    <div>
                                        <span class="fs-5 fw-bold text-color price-item-cart" data-product-id="${response.item.productId}">
                                            ${response.item.price}₫
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button type="button" data-product-id="${response.item.productId}"
                                class="text-main position-absolute top-0 start-100 translate-middle bg-danger text-white border-0 delete-cart" 
                                style="font-size: 13px; border-radius: 50%; width: 24px; height: 24px;">
                            X
                        </button>
                    </div>
                `;

                            // Append to cart
                            $('.cartContainer').append(productHtml);
                        }
                    },
                    error: function () {

                    }
                });
            });
            $('.img-item').first().addClass('border border-danger');
            $('.img-item').on('click', function () {
                $('.img-item').removeClass("border border-danger");
                $(this).addClass('border border-danger');
                
                var newSrc = $(this).attr('src'); 
                $('#mainImage').attr('src', newSrc);

                $('#mainImage').fadeOut(300, function () {
                    $(this).attr('src', newSrc).fadeIn(300); 
                });
            });
        });
    </script>
</body>
</html>
